# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Wgo < Formula
  desc "类 IPython 的 Golang 交互运行工具"
  homepage "https://github.com/wxnacy/wgo"
  version "1.2.7"
  license "MIT"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/wxnacy/wgo/releases/download/v1.2.7/wgo_1.2.7_darwin_amd64.tar.gz"
      sha256 "8a4c9c0f54152e0b17a60d901aa5786f3b7f276104cc27ed4996cdfce5358c4a"

      def install
        bin.install "wgo"
        # 通过可执行文件生成 bash/zsh/fish/powershell 补全
        generate_completions_from_executable(bin/"wgo", "completion", base_name: "wgo")
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/wxnacy/wgo/releases/download/v1.2.7/wgo_1.2.7_darwin_arm64.tar.gz"
      sha256 "f0969e6fe7c7bee8a40a2e6133b69ef2501cc90cc193969cc920816509cd9e2a"

      def install
        bin.install "wgo"
        # 通过可执行文件生成 bash/zsh/fish/powershell 补全
        generate_completions_from_executable(bin/"wgo", "completion", base_name: "wgo")
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/wxnacy/wgo/releases/download/v1.2.7/wgo_1.2.7_linux_amd64.tar.gz"
      sha256 "19611f7107ff1dc49482e061eb2d0d7e9afa214f02ed7fde5f7fdeb1b699bf74"
      def install
        bin.install "wgo"
        # 通过可执行文件生成 bash/zsh/fish/powershell 补全
        generate_completions_from_executable(bin/"wgo", "completion", base_name: "wgo")
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/wxnacy/wgo/releases/download/v1.2.7/wgo_1.2.7_linux_arm64.tar.gz"
      sha256 "859a842c3c853bd4a184b700a0c0367ca13f0001f5e39717e660fc823fb7d29c"
      def install
        bin.install "wgo"
        # 通过可执行文件生成 bash/zsh/fish/powershell 补全
        generate_completions_from_executable(bin/"wgo", "completion", base_name: "wgo")
      end
    end
  end

  def caveats
    <<~EOS
      代码补全依赖 gopls：
        brew install gopls
        或
        go install golang.org/x/tools/gopls@latest

      自动导入/格式化依赖 goimports：
        go install golang.org/x/tools/cmd/goimports@latest
    EOS
  end
end
